
<!DOCTYPE html>
<html lang="" class="loading">
<head><meta name="generator" content="Hexo 3.8.0">
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>廖锡洪</title>

    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="google" content="notranslate">
    <meta name="keywords" content="viabcde,"> 
    
    <meta name="author" content="viacbde"> 
    <link rel="alternative" href="atom.xml" title="廖锡洪" type="application/atom+xml"> 
    <link rel="icon" href="/img/favicon.png"> 
    <link rel="stylesheet" href="//cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.css">
    <link rel="stylesheet" href="/css/diaspora.css">
</head>
</html>
<body class="loading">
    <div id="loader"></div>
    <div id="single">
    <div id="top" style="display: block;">
    <div class="bar" style="width: 0;"></div>
    <a class="icon-home image-icon" href="javascript:;"></a>
    <div title="播放/暂停" class="icon-play"></div>
    <h3 class="subtitle">TCP/IP_1</h3>
    <div class="social">
        <!--<div class="like-icon">-->
            <!--<a href="javascript:;" class="likeThis active"><span class="icon-like"></span><span class="count">76</span></a>-->
        <!--</div>-->
        <div>
            <div class="share">
                <a title="获取二维码" class="icon-scan" href="javascript:;"></a>
            </div>
            <div id="qr"></div>
        </div>
    </div>
    <div class="scrollbar"></div>
</div>
    <div class="section">
        <div class="article">
    <div class="main">
        <h1 class="title">TCP/IP_1</h1>
        <div class="stuff">
            <span>九月 22, 2018</span>
            
  <ul class="post-tags-list"><li class="post-tags-list-item"><a class="post-tags-list-link" href="/tags/标签/">标签</a><span class="post-tags-list-count">162</span></li><li class="post-tags-list-item"><a class="post-tags-list-link" href="/tags/计算机网络/">计算机网络</a><span class="post-tags-list-count">2</span></li></ul>


        </div>
        <div class="content markdown">
            <p><img src="https://viabcde.github.io/images/2018-09-22/tcpip.png" alt="enter description here"><br><img src="https://viabcde.github.io/images/2018-09-22/2018092201.png" alt="enter description here"><br>在上图中，也有一些应用程序直接访问ip层（一些较老的选路协议就是以这种方式来实现的。当然新的运输层协议也有可能使用这种方式）  </p>
<h3 id="ICMP"><a href="#ICMP" class="headerlink" title="ICMP"></a><strong>ICMP</strong></h3><p>是IP协议的附属协议。IP层用它来与其他主机或路由器交换错误报文和其他重要信息.  不仅仅是IP使用了ICMP 流行的诊断工具如Ping和Traceroute，它们也使用了ICMP。  </p>
<h3 id="IGMP"><a href="#IGMP" class="headerlink" title="IGMP"></a><strong>IGMP</strong></h3><p>是Internet组管理协议。它用来把一个UDP数据报多播到多个主机。<br>ARP（地址解析协议）和RARP逆地址解析协议）是某些网络接口（如以太网和令牌环<br>网）使用的特殊协议，用来转换IP层和网络接口层使用的地址。  </p>
<h3 id="1-TCP-IP"><a href="#1-TCP-IP" class="headerlink" title="1.TCP/IP"></a><strong>1.TCP/IP</strong></h3><p>是最常应用的组网（组建网络）形式，是全球互联网和因特网的基础  </p>
<h3 id="2-链路层"><a href="#2-链路层" class="headerlink" title="2.链路层"></a><strong>2.链路层</strong></h3><p>设备驱动程序+网卡（网络接口卡）—-组合处理连接如电缆等物理接口细节   </p>
<h3 id="3-网络层"><a href="#3-网络层" class="headerlink" title="3.网络层"></a><strong>3.网络层</strong></h3><p>处理分组在网络中路径的选择等。网络层协议包括IP协议（网际协议），ICMP协议（Internet互联网控制报文协议），以及IGMP协议（Internet组管理协议）。  </p>
<h3 id="4-运输层"><a href="#4-运输层" class="headerlink" title="4.运输层"></a><strong>4.运输层</strong></h3><p>运输层主要为两台主机上的应用程序提供端到端的通信。在TCP/IP协议族中，有两个互不相同的传输协议：TCP（传输控制协议）和UDP（用户数据报协议）。  </p>
<h3 id="TCP报文段"><a href="#TCP报文段" class="headerlink" title="TCP报文段"></a><strong>TCP报文段</strong></h3><p>为两台主机提供高可靠性的数据通信。它必须确认接收到的分组，且设置了发送最后确认分组的超时时钟等。由于运输层提供了高可靠性的端到端的通信，因此应用层可以忽略所有这些细节。  </p>
<h3 id="UDP数据报"><a href="#UDP数据报" class="headerlink" title="UDP数据报"></a><strong>UDP数据报</strong></h3><p>则为应用层提供一种非常简单的服务。它只是把称作数据报的分组从一台主机发送到另一台主机，但并不保证该数据报能到达另一端。任何必需的可靠性必须由应用层来提供。  </p>
<h3 id="IP数据报"><a href="#IP数据报" class="headerlink" title="IP数据报"></a><strong>IP数据报</strong></h3><h3 id="5-应用层"><a href="#5-应用层" class="headerlink" title="5.应用层"></a><strong>5.应用层</strong></h3><p>应用层负责处理特定的应用程序细节。几乎各种不同的TCP/IP实现程序都会提供下面这些通用的应用程序的实现方法：<br><strong>• Telnet</strong> 远程登录。<br><strong>• FTP</strong> 文件传输协议。<br><strong>• SMTP</strong> 简单邮件传送协议。<br><strong>• SNMP</strong> 简单网络管理协议。<br>FTP是一种应用层协议<br>TCP是一种运输层协议<br>IP是一种网络层协议<br>以太网协议则应用于链路层上    </p>
<h3 id="路由器"><a href="#路由器" class="headerlink" title="路由器:"></a><strong>路由器:</strong></h3><p>构造互连网最简单的方法是把两个或多个网络通过路由器进行连接。它是一种特殊的用于网络互连的硬件盒。这些盒子称作网关（gateway）  </p>
<h3 id="路由器的好处"><a href="#路由器的好处" class="headerlink" title="路由器的好处:"></a><strong>路由器的好处:</strong></h3><p>是为不同类型的物理网络提供连接：以太网、令牌环网、点对点的链接和FDDI（光纤分布式数据接口）等等。<br>IP提供的只是尽可能快地把分组从源结点送到目的结点<br>TCP采用了超时重传、发送和接收端到端的确认分组等机制，为ip增加了可靠性<br><img src="https://viabcde.github.io/images/2018-09-22/2018092202.png" alt="enter description here"><br><img src="https://viabcde.github.io/images/2018-09-22/2018092203.png" alt="enter description here"><br>区分各类地址的最简单方法是看它的第一个十进制整数。<br>Internet注册服务(IP地址和DNS域名)过去由NIC来负责，其网络地址是nic.ddn.mil。<br>1993年4月1日，InterNIC成立。现在，NIC只负责处理国防数据网的注册请求，所有其他的Internet用户注册请求均由InterNIC负责处理，其网址是：rs.internic.net。<br>事实上InterNIC由三部分组成：注册服务（rs.internic.net），目录和数据库服务（ds.internic.net），以及信息服务（is.internic.net）。<br>域名系统（DNS）是一个分布的数据库，由它来提供IP地址和主机名之间的映射信息<br>帧：链路层在以太网传输的比特流  </p>
<h3 id="IP首部空出8位的长度的原因"><a href="#IP首部空出8位的长度的原因" class="headerlink" title="IP首部空出8位的长度的原因"></a><strong>IP首部空出8位的长度的原因</strong></h3><p>由于TCP、UDP、ICMP和IGMP都要向IP传送数据，因此IP必须在生成的IP首部中加入某种标识，以表明数据属于哪一层。为此，IP在首部中存入一个长度为8bit的数值，称作协议域。 1表示为ICMP协议，2表示为IGMP协议，6表示为TCP协议，17表示为UDP协议。<br>类似地，许多应用程序都可以使用 TCP或UDP来传送数据。运输层协议在生成报文首部<br>时要存入一个应用程序的标识符。TCP和UDP都用一个16bit的端口号来表示不同的应用程序。<br>TCP和UDP把源端口号和目的端口号分别存入报文首部中。<br>网络接口分别要发送和接收IP、ARP和RARP数据，因此也必须在以太网的帧首部中加入<br>某种形式的标识，以指明生成数据的网络层协议。为此，以太网的帧首部也有一个16bit的帧类型域。<br>服务器一般都是通过知名端口号来识别的。例如，对于每个TCP/IP实现来说，FTP服务器的TCP端口号都是21，每个Telnet服务器的TCP端口号都是23，每个TFTP(简单文件传送协议)服务器的UDP端口号都是69。任何TCP/IP实现所提供的服务都用知名的1～1023之间的端口号。  </p>
<p>知名端口号介于1～255之间。256～1023之间的端口号通常都是由Unix系统占用，以提供一些特定的Unix服务—也就是说，提供一些只有Unix系统才有的、而其他操作系统可能不提供的服务。现在IANA管理1～1023之间所有的端口号。  </p>
<p>客户端口号又称作临时端口号（即存在时间很短暂）。这是因为它通常只是在用户运行该客户程序时才存在，而服务器则只要主机开着的，其服务就运行。<br><img src="https://viabcde.github.io/images/2018-09-22/2018092204.png" alt="enter description here"><br>intenet 动词 使主机连在一起 Intenet 名词 是所有主机的集合  </p>
<h3 id="分用和复用"><a href="#分用和复用" class="headerlink" title="分用和复用"></a><strong>分用和复用</strong></h3><p>分用：将以太网的帧一层层分离直至交给对应的app<br>复用：将app的数据一层层复合上标志上传到以太网中</p>
<h3 id="子网掩码的作用"><a href="#子网掩码的作用" class="headerlink" title="子网掩码的作用"></a><strong>子网掩码的作用</strong></h3><p>为了计算两个IP地址是否属于同一个网络中<br>因为1与1得1 1与0的0<br>IP与运算子网掩码255.255.255.0可以得到网络号<br>例如：<br>202.99.160.50 换算成二进制为 11001010·01100011·10100000·00110010<br>255.255.255.0 换算成二进制为 11111111·11111111·11111111·00000000<br>将二者进行与运算   </p>
<h3 id="网关"><a href="#网关" class="headerlink" title="网关"></a><strong>网关</strong></h3><p>每个网络之间连接的桥梁<br>因为每个网络中的主机只能与该网络的其他主机通信，不能和其他网络的主机通信<br>只有通过网关即路由器作为代理，其他网关作为另一个主机的代理，这两个主机才能通信  </p>
<h3 id="http持久连接"><a href="#http持久连接" class="headerlink" title="http持久连接"></a><strong>http持久连接</strong></h3><p>http在的一次会话需要先建立tcp连接（大部分是tcp，但是其他安全协议也是可以的），然后才能通信，如果每次连接都只进行一次http会话，那这个连接过程占的比例太大了！</p>
<p>　　于是出现了持久连接：在http/1.0+中是connection首部中添加keep-alive值，在http/1.1中是在connection首部中添加persistent值，当然两者不仅仅是命名上的差别，http/1.1中，持久连接是默认的，除非显示在connection中添加close，否则持久连接不会关闭，而http/1.0+中则恰好相反，除非显示在connection首部中添加keep-alive，否则在接收数据包后连接就断开了。</p>
<p>　　出现了持久连接还不够，在http/1.1中，还有一种称为管道通信的方式进行速度优化：把需要发送到服务器上的所有请求放到输出队列中，在第一个请求发送出去后，不等到收到服务器的应答，第二个请求紧接着就发送出去，但是这样的方式有一个问题：不安全</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">public class Main_1 &#123;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        Integer a = 1;</span><br><span class="line">        Integer b = 2;</span><br><span class="line">        Integer c = 3;</span><br><span class="line">        Integer d = 3;</span><br><span class="line">        Integer e = 321;</span><br><span class="line">        Integer f = 321;</span><br><span class="line">        Long g = 3L;</span><br><span class="line">        System.out.println(c == d);</span><br><span class="line">        System.out.println(e == f);</span><br><span class="line">        System.out.println(c == (a + b));//true</span><br><span class="line">        System.out.println(c.equals(a + b));</span><br><span class="line">        System.out.println(g == (a + b));//true</span><br><span class="line">        System.out.println(g.equals(a + b));</span><br><span class="line">        System.out.println(g.equals(a + h));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="网络传输"><a href="#网络传输" class="headerlink" title="网络传输"></a><strong>网络传输</strong></h3><p>在控制台输入 hello<br>经过应用层 ap hello<br>经过传输层 tcp ap hello<br>经过网络层 ip tcp ap hello<br>经过链路层 帧头 帧尾 ip tcp ap hello<br>经过路由器转发<br>经过链路层  ip tcp ap hello<br>经过网络层  tcp ap hello<br>经过传输层  ap hello<br>经过应用层  hello<br>在控制台输出 hello  </p>
<h3 id="各类ip地址"><a href="#各类ip地址" class="headerlink" title="各类ip地址"></a><strong>各类ip地址</strong></h3><p>a类 0+7位网络号 +3个字节主机号<br>b类 10+14位网络号+2个字节主机号<br>c类 110+21位网络号+1个字节主机号  </p>
<h3 id="路由器寻址"><a href="#路由器寻址" class="headerlink" title="路由器寻址"></a><strong>路由器寻址</strong></h3><p>每个路由器都会管理一些ip地址 构成自己的子网<br>当某一台主机发出寻址要求时   路由器先查看自己的子网是否有对应的ip没有则转发给其他路由器 一直转发至找到ip</p>
<h3 id="单工-、半双工、全双工"><a href="#单工-、半双工、全双工" class="headerlink" title="单工 、半双工、全双工"></a><strong>单工 、半双工、全双工</strong></h3><p>单工 只能发送不能回复 bb机<br>半双工 一方说话时另一方不能说 对讲机<br>全双工 双方可以同时说话</p>

            <!--[if lt IE 9]><script>document.createElement('audio');</script><![endif]-->
            <audio id="audio" loop="1" preload="auto" controls="controls" data-autoplay="true">
                <source type="audio/mpeg" src="/music/1.mp3">
            </audio>
            
        </div>
        
    <div id="gitalk-container" class="comment link" data-ae="false" data-ci="55316b017b800ec5c0da" data-cs="fbe9f4aafee144a34ec283ca34c833ad6da91507" data-r="talk" data-o="viacbde" data-a="viabcde" data-d="false">查看评论</div>


    </div>
    
        <div class="side">
            <ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#ICMP"><span class="toc-number">1.</span> <span class="toc-text">ICMP</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#IGMP"><span class="toc-number">2.</span> <span class="toc-text">IGMP</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-TCP-IP"><span class="toc-number">3.</span> <span class="toc-text">1.TCP/IP</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-链路层"><span class="toc-number">4.</span> <span class="toc-text">2.链路层</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-网络层"><span class="toc-number">5.</span> <span class="toc-text">3.网络层</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-运输层"><span class="toc-number">6.</span> <span class="toc-text">4.运输层</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#TCP报文段"><span class="toc-number">7.</span> <span class="toc-text">TCP报文段</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#UDP数据报"><span class="toc-number">8.</span> <span class="toc-text">UDP数据报</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#IP数据报"><span class="toc-number">9.</span> <span class="toc-text">IP数据报</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-应用层"><span class="toc-number">10.</span> <span class="toc-text">5.应用层</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#路由器"><span class="toc-number">11.</span> <span class="toc-text">路由器:</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#路由器的好处"><span class="toc-number">12.</span> <span class="toc-text">路由器的好处:</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#IP首部空出8位的长度的原因"><span class="toc-number">13.</span> <span class="toc-text">IP首部空出8位的长度的原因</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#分用和复用"><span class="toc-number">14.</span> <span class="toc-text">分用和复用</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#子网掩码的作用"><span class="toc-number">15.</span> <span class="toc-text">子网掩码的作用</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#网关"><span class="toc-number">16.</span> <span class="toc-text">网关</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#http持久连接"><span class="toc-number">17.</span> <span class="toc-text">http持久连接</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#网络传输"><span class="toc-number">18.</span> <span class="toc-text">网络传输</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#各类ip地址"><span class="toc-number">19.</span> <span class="toc-text">各类ip地址</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#路由器寻址"><span class="toc-number">20.</span> <span class="toc-text">路由器寻址</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#单工-、半双工、全双工"><span class="toc-number">21.</span> <span class="toc-text">单工 、半双工、全双工</span></a></li></ol>
        </div>
    
</div>


    </div>
</div>
<script src="/live2dw/lib/L2Dwidget.min.js?0c58a1486de42ac6cc1c59c7d98ae887"></script><script>L2Dwidget.init({"pluginRootPath":"live2dw/","pluginJsPath":"lib/","pluginModelPath":"assets/","tagMode":false,"debug":false,"model":{"jsonPath":"/live2dw/assets/shizuku.model.json"},"display":{"position":"right","width":150,"height":300},"mobile":{"show":true},"log":false});</script></body>
<script src="//cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.js"></script>
<script src="//lib.baomitu.com/jquery/1.8.3/jquery.min.js"></script>
<script src="/js/plugin.js"></script>
<script src="/js/diaspora.js"></script>
<link rel="stylesheet" href="/photoswipe/photoswipe.css">
<link rel="stylesheet" href="/photoswipe/default-skin/default-skin.css">
<script src="/photoswipe/photoswipe.min.js"></script>
<script src="/photoswipe/photoswipe-ui-default.min.js"></script>

<!-- Root element of PhotoSwipe. Must have class pswp. -->
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">
    <!-- Background of PhotoSwipe. 
         It's a separate element as animating opacity is faster than rgba(). -->
    <div class="pswp__bg"></div>
    <!-- Slides wrapper with overflow:hidden. -->
    <div class="pswp__scroll-wrap">
        <!-- Container that holds slides. 
            PhotoSwipe keeps only 3 of them in the DOM to save memory.
            Don't modify these 3 pswp__item elements, data is added later on. -->
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>
        <!-- Default (PhotoSwipeUI_Default) interface on top of sliding area. Can be changed. -->
        <div class="pswp__ui pswp__ui--hidden">
            <div class="pswp__top-bar">
                <!--  Controls are self-explanatory. Order can be changed. -->
                <div class="pswp__counter"></div>
                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
                <button class="pswp__button pswp__button--share" title="Share"></button>
                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>
                <!-- Preloader demo http://codepen.io/dimsemenov/pen/yyBWoR -->
                <!-- element will get class pswp__preloader--active when preloader is running -->
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                      <div class="pswp__preloader__cut">
                        <div class="pswp__preloader__donut"></div>
                      </div>
                    </div>
                </div>
            </div>
            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div> 
            </div>
            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>
            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>
            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>
        </div>
    </div>
</div>




</html>