<!DOCTYPE HTML>
<html lang="">


<head><meta name="generator" content="Hexo 3.8.0">
    <meta charset="utf-8">
    <meta name="keywords" content="Oracle2, viabcde">
    <meta name="description" content="创建用户具有dba(数据库管理员)的权限才能使用create user 用户名 identified by 密码;eg、create user xiaoming identified by oracle;可能遇到的bug：oracle有个毛">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="renderer" content="webkit|ie-stand|ie-comp">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="format-detection" content="telephone=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <title>Oracle2 | 廖锡洪</title>
    <link rel="icon" type="image/png" href="/favicon.png">

    <link rel="stylesheet" type="text/css" href="/libs/awesome/css/font-awesome.min.css">
    <link rel="stylesheet" type="text/css" href="/libs/materialize/css/materialize.min.css">
    <link rel="stylesheet" type="text/css" href="/libs/aos/aos.css">
    <link rel="stylesheet" type="text/css" href="/libs/animate/animate.min.css">
    <link rel="stylesheet" type="text/css" href="/libs/lightGallery/css/lightgallery.min.css">
    <link rel="stylesheet" type="text/css" href="/css/matery.css">
    <link rel="stylesheet" type="text/css" href="/css/my.css">

    <script src="/libs/jquery/jquery-2.2.0.min.js"></script>
<link rel="stylesheet" href="/css/prism-tomorrow.css" type="text/css"></head>


<body>

<header class="navbar-fixed">
    <nav id="headNav" class="bg-color nav-transparent">
        <div id="navContainer" class="container">
            <div class="nav-wrapper">
                <div class="brand-logo">
                    <a href="/" class="waves-effect waves-light">
                        
                        <img src="/medias/logo.png" class="logo-img hide-on-small-only">
                        
                        <span class="logo-span">廖锡洪</span>
                    </a>
                </div>
                

<a href="#" data-activates="mobile-nav" class="button-collapse"><i class="fa fa-navicon"></i></a>
<ul class="right">
    
    <li class="hide-on-med-and-down">
        <a href="/" class="waves-effect waves-light">
            
            <i class="fa fa-home"></i>
            
            <span>Index</span>
        </a>
    </li>
    
    <li class="hide-on-med-and-down">
        <a href="/tags" class="waves-effect waves-light">
            
            <i class="fa fa-tags"></i>
            
            <span>Tags</span>
        </a>
    </li>
    
    <li class="hide-on-med-and-down">
        <a href="/categories" class="waves-effect waves-light">
            
            <i class="fa fa-bookmark"></i>
            
            <span>Categories</span>
        </a>
    </li>
    
    <li class="hide-on-med-and-down">
        <a href="/archives" class="waves-effect waves-light">
            
            <i class="fa fa-archive"></i>
            
            <span>Archives</span>
        </a>
    </li>
    
    <li class="hide-on-med-and-down">
        <a href="/about" class="waves-effect waves-light">
            
            <i class="fa fa-user-circle-o"></i>
            
            <span>About</span>
        </a>
    </li>
    
    <li class="hide-on-med-and-down">
        <a href="/friends" class="waves-effect waves-light">
            
            <i class="fa fa-address-book"></i>
            
            <span>Friends</span>
        </a>
    </li>
    
    <li>
        <a id="toggleSearch" class="waves-effect waves-light">
            <i id="searchIcon" class="mdi-action-search" title="Search"></i>
        </a>
    </li>

</ul>

<div class="side-nav" id="mobile-nav">

    <div class="mobile-head bg-color">
        
        <img src="/medias/logo.png" class="logo-img circle responsive-img">
        
        <div class="logo-name">廖锡洪</div>
        <div class="logo-desc">
            
            廖锡洪
            
        </div>
    </div>

    

    <ul class="menu-list mobile-menu-list">
        
        <li>
            <a href="/" class="waves-effect waves-light">
                
                <i class="fa fa-fw fa-home"></i>
                
                Index
            </a>
        </li>
        
        <li>
            <a href="/tags" class="waves-effect waves-light">
                
                <i class="fa fa-fw fa-tags"></i>
                
                Tags
            </a>
        </li>
        
        <li>
            <a href="/categories" class="waves-effect waves-light">
                
                <i class="fa fa-fw fa-bookmark"></i>
                
                Categories
            </a>
        </li>
        
        <li>
            <a href="/archives" class="waves-effect waves-light">
                
                <i class="fa fa-fw fa-archive"></i>
                
                Archives
            </a>
        </li>
        
        <li>
            <a href="/about" class="waves-effect waves-light">
                
                <i class="fa fa-fw fa-user-circle-o"></i>
                
                About
            </a>
        </li>
        
        <li>
            <a href="/friends" class="waves-effect waves-light">
                
                <i class="fa fa-fw fa-address-book"></i>
                
                Friends
            </a>
        </li>
        
        
        <li><div class="divider"></div></li>
        <li>
            <a href="https://github.com/blinkfox/hexo-theme-matery" class="waves-effect waves-light" target="_blank">
                <i class="fa fa-github-square fa-fw"></i>Fork Me
            </a>
        </li>
        
    </ul>

    <div class="social-link">
    <a href="https://github.com/viabcde/viabcde.github.io" class="tooltipped" target="_blank" data-tooltip="访问我的GitHub" data-position="top" data-delay="50">
        <i class="fa fa-github"></i>
    </a>



    <a href="mailto:437230257@qq.com" class="tooltipped" target="_blank" data-tooltip="邮件联系我" data-position="top" data-delay="50">
        <i class="fa fa-envelope-open"></i>
    </a>



    <a href="tencent://AddContact/?fromId=50&fromSubId=1&subcmd=all&uin=437230257" class="tooltipped" data-tooltip="QQ联系我: 437230257" data-position="top" data-delay="50">
        <i class="fa fa-qq"></i>
    </a>


</div>
</div>

            </div>
        </div>

        
        <style>
    .nav-transparent .github-corner {
        display: none !important;
    }

    .github-corner {
        position: absolute;
        z-index: 10;
        top: 0;
        right: 0;
        border: 0;
        transform: scale(1.1);
    }

    .github-corner svg {
        color: #0f9d58;
        fill: #fff;
        height: 64px;
        width: 64px;
    }

    .github-corner:hover .octo-arm {
        animation: a 0.56s ease-in-out;
    }

    .github-corner .octo-arm {
        animation: none;
    }

    @keyframes a {
        0%,
        to {
            transform: rotate(0);
        }
        20%,
        60% {
            transform: rotate(-25deg);
        }
        40%,
        80% {
            transform: rotate(10deg);
        }
    }
</style>

<a href="https://github.com/blinkfox/hexo-theme-matery" class="github-corner tooltipped hide-on-med-and-down" target="_blank" data-tooltip="Fork Me" data-position="left" data-delay="50">
    <svg viewbox="0 0 250 250" aria-hidden="true">
        <path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"/>
        <path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"/>
        <path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"/>
    </svg>
</a>
        
    </nav>
</header>


<script src="/libs/cryptojs/crypto-js.min.js"></script>
<script>
    (function() {
        let pwd = '';
        if (pwd && pwd.length > 0) {
            if (pwd !== CryptoJS.SHA256(prompt('请输入访问本文章的密码')).toString(CryptoJS.enc.Hex)) {
                alert('密码错误，将返回主页！');
                location.href = '/';
            }
        }
    })();
</script>




<div class="bg-cover post-cover" style="background-image: url('http://pmi6mt23n.bkt.clouddn.com/12.jpg')">
    <div class="container">
        <div class="row">
            <div class="col s12 m12 l12">
                <div class="brand">
                    <div class="description center-align post-title">
                        Oracle2
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>



<main class="container content">

    
    <!-- 文章内容详情 -->
<div id="artDetail">
    <div class="card">
        <div class="card-content article-info">
            <div class="row tag-cate">
                <div class="col s7">
                    
                    <div class="article-tag">
                        
                            <a href="/tags/数据库/" target="_blank">
                                <span class="chip bg-color">数据库</span>
                            </a>
                        
                    </div>
                    
                </div>
                <div class="col s5 right-align">
                    
                    <div class="post-cate">
                        <i class="fa fa-bookmark fa-fw icon-category"></i>
                        
                            <a href="/categories/java/" class="post-category" target="_blank">
                                java
                            </a>
                        
                    </div>
                    
                </div>
            </div>

            <div class="post-info">
                <div class="post-date info-break-policy">
                    <i class="fa fa-calendar-minus-o fa-fw"></i>Publish Date:&nbsp;&nbsp;
                    2018-12-19
                </div>

                
				
				
                    <div id="busuanzi_container_page_pv" class="info-break-policy">
                        <i class="fa fa-eye fa-fw"></i>Read Count:&nbsp;&nbsp;
                        <span id="busuanzi_value_page_pv"></span>
                    </div>
				
            </div>
        </div>
        <hr class="clearfix">
        <div class="card-content article-card-content">
            <div id="articleContent">
                <h3 id="创建用户"><a href="#创建用户" class="headerlink" title="创建用户"></a><strong>创建用户</strong></h3><p>具有dba(数据库管理员)的权限才能使用<br>create user 用户名 identified by 密码;<br>eg、<code>create user xiaoming identified by oracle;</code><br><strong>可能遇到的bug：</strong>oracle有个毛病，密码必须以字母开头，如果以数字开头，它不会创建用户   </p>
<h3 id="修改用户的密码"><a href="#修改用户的密码" class="headerlink" title="修改用户的密码"></a><strong>修改用户的密码</strong></h3><p>一是修改自己的密码，可直接修改：SQL&gt; <code>password 用户名</code>   或者直接敲  <code>passw</code><br>二是给别人修改密码则需要具有dba的权限，或是拥有alter user的系统权限   <code>SQL&gt; alter user 用户名 identified by 新密码</code>   </p>
<h3 id="删除用户"><a href="#删除用户" class="headerlink" title="删除用户"></a><strong>删除用户</strong></h3><p><strong>前提：</strong>一般以dba的身份去删除某个用户，如果用其它用户去删除用户则需要具有drop user的权限<br>drop user 用户名 cascade<br><strong>加cascade的原因：</strong>在删除用户时，如果要删除的用户，已经创建了表，那么就需要在删除的时候带一个参数cascade，即把该用户及表一同删除;   </p>
<h3 id="权限"><a href="#权限" class="headerlink" title="权限"></a><strong>权限</strong></h3><p>权限分为系统权限和对象权限<br>何为系统权限？<br>用户对数据库的相关权限，connect、resource、dba等系统权限，如建库、建表、建索引、建存储过程、登陆数据库、修改密码等。<br>何为对象权限？<br>用户对其他用户的数据对象操作的权限，insert、delete、update、select、all等对象权限，数据对象有很多，比如表，索引，视图，触发器、存储过程、包等。</p>
<h3 id="角色"><a href="#角色" class="headerlink" title="角色"></a><strong>角色</strong></h3><p>角色分为预定义角色和自定义角色    </p>
<h2 id="预定义角色connect、resource、dba"><a href="#预定义角色connect、resource、dba" class="headerlink" title="预定义角色connect、resource、dba"></a><strong>预定义角色connect、resource、dba</strong></h2><p><strong>connect角色</strong>   ：开发人员需要的大部分权限   </p>
<p><code>`</code> create cluster<br>create database link<br>create session<br>alter session<br>create table<br>create view<br>create sequence</p>
<pre><code>**resource角色**：具有应用开发人员所需要的其它权限，比如建立存储过程，触发器等    

</code></pre><p>create cluster<br>create indextype<br>create table<br>create sequence<br>create type<br>create procedure<br>create trigger</p>
<pre><code>**dba角色**
dba角色具有所有的系统权限，及with admin option选项，默认的dba用户为sys和system，它们可以将任何系统权限授予其他用户。但是要注意的是dba角色不具备sysdba和sysoper的特权（启动和关闭数据库）   
## **自定义角色**
一般是dba来建立，如果用别的用户来建立，则需要具有create role的系统权限。   
**建立角色（不验证）**：`create role 角色名 not identified;`
**建立角色（数据库验证）**：`create role 角色名 identified by 密码;`
## **给角色授权**

``` SQL&gt; conn system/oracle;
SQL&gt; grant create session to 角色名 with admin option
SQL&gt; conn scott/oracle@orcl;
SQL&gt; grant select on scott.emp to 角色名;
SQL&gt; grant insert, update, delete on scott.emp to 角色名;
</code></pre><p><strong>注意：</strong>系统权限的unlimited tablespace和对象权限的with grant option选项是不能授予角色的   </p>
<h2 id="分配角色给某个用户"><a href="#分配角色给某个用户" class="headerlink" title="分配角色给某个用户"></a><strong>分配角色给某个用户</strong></h2><p>一般分配角色是由dba来完成的，如果要以其它用户身份分配角色，则要求用户必须具有grant any role的系统权限。<br><code>`</code> SQL&gt; conn system/oracle;<br>SQL&gt; grant 角色名 to blake with admin option;</p>
<pre><code>## **删除角色**
一般是dba来执行，如果其它用户则要求该用户具有drop any role系统权限
``` SQL&gt; conn system/oracle;
SQL&gt; drop role 角色名;
</code></pre><p><strong>bug:</strong> 如果角色被删除，那么被授予角色的用户不具有之前角色里的权限</p>
<h2 id="显示角色信息"><a href="#显示角色信息" class="headerlink" title="显示角色信息"></a><strong>显示角色信息</strong></h2><p><strong>显示所有角色：</strong> <code>SQL&gt; select * from dba_roles;</code><br><strong>显示角色具有的系统权限</strong>：<code>SQL&gt; select privilege, admin_option from role_sys_privs where role=&#39;角色名&#39;;</code></p>
<h3 id="用户管理案例"><a href="#用户管理案例" class="headerlink" title="用户管理案例"></a><strong>用户管理案例</strong></h3><p>概述：创建的新用户是没有任何权限的，甚至连登陆的数据库的权限都没有，需要为其指定相应的权限。给一个用户赋权限使用命令grant，回收权限使用命令revoke。<br>为了讲清楚用户的管理，这里我给大家举一个案例。<br>SQL&gt; conn xiaoming/oracle<br>ERROR:<br>ORA-01045: user XIAOMING lacks CREATE SESSION privilege; logon denied<br>警告: 您不再连接到 ORACLE。<br>SQL&gt; show user<br>USER 为 “”<br>SQL&gt; conn system/oracle<br>已连接。<br>SQL&gt; grant connect to xiaoming;<br>授权成功。<br>SQL&gt; conn xiaoming/oracle<br>已连接。<br>SQL&gt;<br>注意：grant connect to xiaoming;在这里，准确的讲，connect不是权限，而是角色。   </p>
<p>现在说下对象权限，现在要做这么件事情：<br> 希望xiaoming用户可以去查询emp表<br> 希望xiaoming用户可以去查询scott的emp表<br>grant select on scott.emp to xiaoming<br> 希望xiaoming用户可以去修改scott的emp表<br>grant update on scott.emp to xiaoming<br> 希望xiaoming 用户可以去修改/删除，查询，添加scott的emp表<br>grant all on scott.emp to xiaoming<br> scott希望收回xiaoming对emp表的查询权限<br>revoke select on scott.emp from xiaoming   </p>
<h3 id="with-admin-option与with-grant-option区别"><a href="#with-admin-option与with-grant-option区别" class="headerlink" title="with admin option与with grant option区别"></a><strong>with admin option与with grant option区别</strong></h3><p>1、with admin option用于系统权限授权，with grant option用于对象授权。<br>2、给一个用户授予系统权限带上with admin option时，此用户可把此系统权限授予其他用户或角色，但收回这个用户的系统权限时，这个用户已经授予其他用户或角色的此系统权限不会因传播无效，如授予A系统权限create session with admin option,然后A又把create session权限授予B,但管理员收回A的create session权限时，B依然拥有create session的权限，但管理员可以显式收回B create session的权限，即直接revoke create session from B.<br>而with grant option用于对象授权时，被授予的用户也可把此对象权限授予其他用户或角色，不同的是但管理员收回用with grant option授权的用户对象权限时，权限会因传播而失效，如grant select on table with grant option to A,A用户把此权限授予B，但管理员收回A的权限时，B的权限也会失效，但管理员不可以直接收回B的SELECT ON TABLE 权限。   </p>
<h3 id="账户锁定"><a href="#账户锁定" class="headerlink" title="账户锁定"></a><strong>账户锁定</strong></h3><p>指定scott这个用户最多只能尝试3次登陆，锁定时间为2天<br>创建profile文件<br>SQL&gt; create profile lock_account limit failed_login_attempts 3 password_lock_time 2;<br>SQL&gt; alter user scott profile lock_account;<br>给账户(用户)解锁<br>SQL&gt; alter user scott account unlock<br>终止口令:给前面创建的用户test创建一个profile文件，要求该用户每隔10天要修改自己的登陆密码，宽限期为2天。<br>SQL&gt; create profile myprofile limit password_life_time 10 password_grace_time 2;<br>SQL&gt; alter user test profile myprofile;<br>口令历史:希望用户在修改密码时，不能使用以前使用过的密码，可使用口令历史，这样oracle就会将口令修改的信息存放到数据字典中，这样当用户修改密码时，oracle就会对新旧密码进行比较，当发现新旧密码一样时，就提示用户重新输入密码。<br>例子：<br>1）建立profile<br>SQL&gt;create profile password_history limit password_life_time 10 password_grace_time 2<br>password_reuse_time 10 //password_reuse_time指定口令可重用时间即10天后就可以重用<br>2）分配给某个用户<br>SQL&gt; alter user test profile password_history;<br>删除profile:<br>SQL&gt; drop profile password_history 【casade】<br>注意：文件删除后，用这个文件去约束的那些用户通通也都被释放了。。<br>加了casade，就会把级联的相关东西也给删除掉   </p>
<h3 id="添加数据"><a href="#添加数据" class="headerlink" title="添加数据"></a><strong>添加数据</strong></h3><p>–所有字段都插入数据<br>insert into student values (‘a001’, ‘张三’, ‘男’, ‘01-5 月-05’, 10);<br>–oracle中默认的日期格式‘dd-mon-yy’ dd 天 mon 月份 yy 2位的年 ‘09-6 月-99’ 1999年6月9日<br>–修改日期的默认格式（临时修改，数据库重启后仍为默认；如要修改需要修改注册表）<br>alter session set nls_date_format =’yyyy-mm-dd’;<br>–修改后，可以用我们熟悉的格式添加日期类型：<br>insert into student values (‘a002’, ‘mike’, ‘男’, ‘1905-05-06’, 10);<br>–插入部分字段<br>insert into student(xh, xm, sex) values (‘a003’, ‘john’, ‘女’);<br>–插入空值<br>insert into student(xh, xm, sex, birthday) values (‘a004’, ‘martin’, ‘男’, null);<br>–问题来了，如果你要查询student表里birthday为null的记录，怎么写sql呢？<br>–错误写法：select <em> from student where birthday = null;<br>–正确写法：select </em> from student where birthday is null;<br>–如果要查询birthday不为null,则应该这样写：<br>select * from student where birthday is not null;   </p>
<h3 id="删除数据"><a href="#删除数据" class="headerlink" title="删除数据"></a><strong>删除数据</strong></h3><p>delete from student; –删除所有记录，表结构还在，写日志，可以恢复的，速度慢。<br>–delete的数据可以恢复。<br>savepoint a; –创建保存点<br>delete from student;<br>rollback to a; –恢复到保存点<br>一个有经验的dba，在确保完成无误的情况下要定期创建还原点。    </p>
<h3 id="查看表结构"><a href="#查看表结构" class="headerlink" title="查看表结构"></a><strong>查看表结构</strong></h3><p>desc emp;</p>
<h3 id="查询所有列"><a href="#查询所有列" class="headerlink" title="查询所有列"></a><strong>查询所有列</strong></h3><p>select <em> from dept;<br>备注:切忌动不动就用`select </em><code>，使用</code>*`效率比较低，特别在大表中要注意。  </p>
<h3 id="打开显示操作时间的开关，在底部显示操作时间"><a href="#打开显示操作时间的开关，在底部显示操作时间" class="headerlink" title="打开显示操作时间的开关，在底部显示操作时间"></a><strong>打开显示操作时间的开关，在底部显示操作时间</strong></h3><p>set timing on/off;<br>eg、sql&gt; insert into tb_stu values(‘0001’, ‘zhangsan’, 24);<br>1 row inserted<br>executed in 0.015 seconds   </p>
<h3 id="添加主键约束"><a href="#添加主键约束" class="headerlink" title="添加主键约束"></a><strong>添加主键约束</strong></h3><p>alter table tb_dept add constraint tb_dept primary key (deptno);   </p>
<h3 id="统计"><a href="#统计" class="headerlink" title="统计"></a><strong>统计</strong></h3><pre class=" language-sql"><code class="language-sql"><span class="token keyword">select</span> <span class="token function">count</span> <span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span> <span class="token keyword">from</span> emp<span class="token punctuation">;</span>
</code></pre>
<h3 id="如何取消重复行distinct"><a href="#如何取消重复行distinct" class="headerlink" title="如何取消重复行distinct"></a><strong>如何取消重复行distinct</strong></h3><p>select distinct deptno, job from emp;   </p>
<h3 id="nvl函数"><a href="#nvl函数" class="headerlink" title="nvl函数"></a><strong>nvl函数</strong></h3><p>格式为：nvl(string1, replace_with) 　　<br>功能：如果string1为null，则nvl函数返回replace_with的值，否则返回string1的值。 　<br>注意事项：string1和replace_with必须为同一数据类型，除非显示的使用to_char函数。    　<br>eg、如何显示每个雇员的年工资？   </p>
<pre class=" language-lsl"><code class="language-lsl">select sal*13+nvl(comm, 0)*13 "年薪" , ename, comm from emp;   
</code></pre>
<h3 id="如何处理null值"><a href="#如何处理null值" class="headerlink" title="如何处理null值"></a><strong>如何处理null值</strong></h3><p>使用nvl函数来处理</p>
<h3 id="如何连接字符串"><a href="#如何连接字符串" class="headerlink" title="如何连接字符串(||)"></a><strong>如何连接字符串(||)</strong></h3><pre class=" language-sql"><code class="language-sql"><span class="token keyword">select</span> ename <span class="token operator">||</span> <span class="token string">' is a '</span> <span class="token operator">||</span> job <span class="token keyword">from</span> emp<span class="token punctuation">;</span>
</code></pre>
<h3 id="如何查找1982-1-1后入职的员工？"><a href="#如何查找1982-1-1后入职的员工？" class="headerlink" title="如何查找1982.1.1后入职的员工？"></a><strong>如何查找1982.1.1后入职的员工？</strong></h3><pre class=" language-sql"><code class="language-sql"><span class="token keyword">select</span> ename<span class="token punctuation">,</span>hiredate <span class="token keyword">from</span> emp <span class="token keyword">where</span> hiredate <span class="token operator">></span><span class="token string">'1-1 月-1982'</span><span class="token punctuation">;</span>
</code></pre>
<h3 id="如何使用like操作符"><a href="#如何使用like操作符" class="headerlink" title="如何使用like操作符"></a><strong>如何使用like操作符</strong></h3><pre class=" language-shell"><code class="language-shell">%：表示0到多个字符 _：表示任意单个字符
</code></pre>
<h2 id="问题：如何显示首字符为s的员工姓名和工资？"><a href="#问题：如何显示首字符为s的员工姓名和工资？" class="headerlink" title="问题：如何显示首字符为s的员工姓名和工资？"></a><strong>问题：如何显示首字符为s的员工姓名和工资？</strong></h2><pre class=" language-sql"><code class="language-sql"><span class="token keyword">select</span> ename<span class="token punctuation">,</span>sal <span class="token keyword">from</span> emp <span class="token keyword">where</span> ename <span class="token operator">like</span> <span class="token string">'s%'</span><span class="token punctuation">;</span>
</code></pre>
<h2 id="如何显示第三个字符为大写o的所有员工的姓名和工资？"><a href="#如何显示第三个字符为大写o的所有员工的姓名和工资？" class="headerlink" title="如何显示第三个字符为大写o的所有员工的姓名和工资？"></a><strong>如何显示第三个字符为大写o的所有员工的姓名和工资？</strong></h2><pre class=" language-sql"><code class="language-sql"><span class="token keyword">select</span> ename<span class="token punctuation">,</span>sal <span class="token keyword">from</span> emp <span class="token keyword">where</span> ename <span class="token operator">like</span> <span class="token string">'__o%'</span><span class="token punctuation">;</span>
</code></pre>
<h2 id="如何显示empno为7844-7839-123-456的雇员情况？"><a href="#如何显示empno为7844-7839-123-456的雇员情况？" class="headerlink" title="如何显示empno为7844,7839,123,456的雇员情况？"></a><strong>如何显示empno为7844,7839,123,456的雇员情况？</strong></h2><p>select * from emp where empno in (7844, 7839, 123, 456);     </p>
<h2 id="如何显示没有上级的雇员的情况？"><a href="#如何显示没有上级的雇员的情况？" class="headerlink" title="如何显示没有上级的雇员的情况？"></a><strong>如何显示没有上级的雇员的情况？</strong></h2><p>错误写法：select <em> from emp where mgr = ‘’;<br>正确写法：select </em> from emp where mgr is null;<br>查询工资高于500或者是岗位为manager的雇员，同时还要满足他们的姓名首字母为大写的J？<br>select * from emp where (sal &gt; 500 or job = ‘MANAGER’) and ename like ‘J%’;<br>使用列的别名排序<br>问题：按年薪排序   </p>
<pre class=" language-sql"><code class="language-sql"><span class="token keyword">select</span> ename<span class="token punctuation">,</span> <span class="token punctuation">(</span>sal<span class="token operator">+</span>nvl<span class="token punctuation">(</span>comm<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">*</span><span class="token number">12</span> <span class="token string">"年薪"</span> <span class="token keyword">from</span> emp <span class="token keyword">order</span> <span class="token keyword">by</span> <span class="token string">"年薪"</span> <span class="token keyword">asc</span><span class="token punctuation">;</span>
</code></pre>
<p>备注：别名需要使用“”号圈中,英文不需要“”号  </p>
<h2 id="最高工资那个人是谁？"><a href="#最高工资那个人是谁？" class="headerlink" title="最高工资那个人是谁？"></a><strong>最高工资那个人是谁？</strong></h2><p>错误写法：select ename, sal from emp where sal=max(sal);<br>正确写法：select ename, sal from emp where sal=(select max(sal) from emp);<br>注意：select ename, max(sal) from emp;这语句执行的时候会报错，说ora-00937：非单组分组函数。因为max是分组函数，而ename不是分组函数…….<br>但是select min(sal), max(sal) from emp;这句是可以执行的。因为min和max都是分组函数，就是说：如果列里面有一个分组函数，其它的都必须是分组函数，否则就出错。这是语法规定的<br>group by 用于对查询的结果分组统计，<br>having 子句用于限制分组显示结果。   </p>
<h2 id="问题：如何显示每个部门的平均工资和最高工资？"><a href="#问题：如何显示每个部门的平均工资和最高工资？" class="headerlink" title="问题：如何显示每个部门的平均工资和最高工资？"></a><strong>问题：如何显示每个部门的平均工资和最高工资？</strong></h2><p>select avg(sal), max(sal), deptno from emp group by deptno;<br>（注意：这里暗藏了一点，如果你要分组查询的话，分组的字段deptno一定要出现在查询的列表里面，否则会报错。因为分组的字段都不出现的话，就没办法分组了）   </p>
<h2 id="问题：显示每个部门的每种岗位的平均工资和最低工资？"><a href="#问题：显示每个部门的每种岗位的平均工资和最低工资？" class="headerlink" title="问题：显示每个部门的每种岗位的平均工资和最低工资？"></a><strong>问题：显示每个部门的每种岗位的平均工资和最低工资？</strong></h2><p>select min(sal), avg(sal), deptno, job from emp group by deptno, job;   </p>
<h2 id="问题：显示平均工资低于2000的部门号和它的平均工资？"><a href="#问题：显示平均工资低于2000的部门号和它的平均工资？" class="headerlink" title="问题：显示平均工资低于2000的部门号和它的平均工资？"></a><strong>问题：显示平均工资低于2000的部门号和它的平均工资？</strong></h2><p>select avg(sal), max(sal), deptno from emp group by deptno having avg(sal)&lt; 2000;<br>如果在select语句中同时包含有group by, having, order by 那么它们的顺序是group by, having, order by  </p>
<h2 id="显示某个员工的上级领导的姓名？"><a href="#显示某个员工的上级领导的姓名？" class="headerlink" title="显示某个员工的上级领导的姓名？"></a><strong>显示某个员工的上级领导的姓名？</strong></h2><p>比如显示员工‘FORD’的上级<br>SELECT worker.ename, boss.ename FROM emp worker, emp boss WHERE worker.mgr = boss.empno AND worker.ename = ‘FORD’;   </p>
<h2 id="单行子查询"><a href="#单行子查询" class="headerlink" title="单行子查询"></a><strong>单行子查询</strong></h2><p>SELECT * FROM emp WHERE deptno = (select deptno from emp WHERE ename = ‘SMITH’);<br>数据库在执行sql是从左到右扫描的，如果有括号的话，括号里面的先被优先执行。  </p>
<h2 id="多行子查询"><a href="#多行子查询" class="headerlink" title="多行子查询"></a><strong>多行子查询</strong></h2><p>SELECT * FROM emp WHERE job IN (SELECT DISTINCT job FROM emp WHERE deptno = 10);<br>注意：不能用job=..，因为等号=是一对一的  </p>
<h2 id="如何显示工资比部门30的所有员工的工资高的员工的姓名、工资和部门号？"><a href="#如何显示工资比部门30的所有员工的工资高的员工的姓名、工资和部门号？" class="headerlink" title="如何显示工资比部门30的所有员工的工资高的员工的姓名、工资和部门号？"></a><strong>如何显示工资比部门30的所有员工的工资高的员工的姓名、工资和部门号？</strong></h2><p>–方法一<br>SELECT ename, sal, deptno FROM emp WHERE sal &gt; all(SELECT sal FROM emp WHERE deptno = 30);<br>–方法二(执行效率最高，使用聚合函数)<br>SELECT ename, sal, deptno FROM emp WHERE sal &gt; (SELECT max(sal) FROM emp WHERE deptno = 30);  </p>
<h2 id="如何显示工资比部门30的任意一个员工的工资高的员工姓名、工资和部门号？"><a href="#如何显示工资比部门30的任意一个员工的工资高的员工姓名、工资和部门号？" class="headerlink" title="如何显示工资比部门30的任意一个员工的工资高的员工姓名、工资和部门号？"></a><strong>如何显示工资比部门30的任意一个员工的工资高的员工姓名、工资和部门号？</strong></h2><p>–方法一<br>SELECT ename, sal, deptno FROM emp WHERE sal &gt; ANY (SELECT sal FROM emp WHERE deptno = 30);<br>–方法二(执行效率最高，使用聚合函数)<br>SELECT ename, sal, deptno FROM emp WHERE sal &gt; (SELECT min(sal) FROM emp WHERE deptno = 30);   </p>
<h2 id="多列子查询"><a href="#多列子查询" class="headerlink" title="多列子查询"></a><strong>多列子查询</strong></h2><h2 id="查询与SMITH-的部门和岗位完全相同的所有雇员"><a href="#查询与SMITH-的部门和岗位完全相同的所有雇员" class="headerlink" title="查询与SMITH 的部门和岗位完全相同的所有雇员"></a><strong>查询与SMITH 的部门和岗位完全相同的所有雇员</strong></h2><p>SELECT deptno, job FROM emp WHERE ename = ‘SMITH’;<br>SELECT * FROM emp WHERE (deptno, job) = (SELECT deptno, job FROM emp WHERE ename = ‘SMITH’);  </p>
<h2 id="如何显示高于自己部门平均工资的员工的信息"><a href="#如何显示高于自己部门平均工资的员工的信息" class="headerlink" title="如何显示高于自己部门平均工资的员工的信息"></a><strong>如何显示高于自己部门平均工资的员工的信息</strong></h2><p>SELECT e.ename, e.deptno, e.sal, ds.mysal<br>FROM emp e, (SELECT deptno, AVG(sal) mysal FROM emp GROUP by deptno) ds<br>WHERE e.deptno = ds.deptno AND e.sal &gt; ds.mysal;<br><strong>注意：</strong>给表取别名的时候，不能加as；但是给列取别名，是可以加as的  </p>
<h2 id="用查询结果创建新表"><a href="#用查询结果创建新表" class="headerlink" title="用查询结果创建新表"></a><strong>用查询结果创建新表</strong></h2><p>CREATE TABLE mytable (id, name, sal, job, deptno) as SELECT empno, ename, sal, job, deptno FROM emp;</p>
<h3 id="分页"><a href="#分页" class="headerlink" title="分页"></a><strong>分页</strong></h3><p>根据rowid来分</p>
<pre><code>SELECT *
  FROM EMP
 WHERE ROWID IN
       (SELECT RID
          FROM (SELECT ROWNUM RN, RID
                  FROM (SELECT ROWID RID, EMPNO FROM EMP ORDER BY EMPNO DESC)
                 WHERE ROWNUM &lt;= ( (currentPage-1) * pageSize + pageSize )) --每页显示几条
         WHERE RN &gt; ((currentPage-1) * pageSize) ) --当前页数
 ORDER BY EMPNO DESC;

eg、
-- 5 = (currentPage-1) * pageSize + pageSize   每页显示几条
-- 0 = (currentPage-1) * pageSize              当前页数
SELECT *
  FROM EMP
 WHERE ROWID IN
       (SELECT RID
          FROM (SELECT ROWNUM RN, RID
                  FROM (SELECT ROWID RID, EMPNO FROM EMP ORDER BY EMPNO DESC)
                 WHERE ROWNUM &lt;= ( (1-1) * 5 + 5 )) --每页显示几条
         WHERE RN &gt; ((1-1) * 5) ) --当前页数
 ORDER BY EMPNO DESC;

</code></pre><h2 id="事务"><a href="#事务" class="headerlink" title="事务"></a><strong>事务</strong></h2><p>设置只读事务: set transaction read only;</p>
<h3 id="导出表"><a href="#导出表" class="headerlink" title="导出表"></a><strong>导出表</strong></h3><p>在导入和导出的时候，要到oracle目录的bin目录下<br>C:\Users\jiqinlin&gt;cd D:\dev\oracle\product\10.2.0\db_1\bin<br>C:\Users\jiqinlin&gt;d:<br>D:\dev\oracle\product\10.2.0\db_1\bin&gt;exp userid=scott/oracle@orcl tables=(emp) file=d:\emp.dmp   </p>

            </div>
            <hr>

            
            <style>
    #reward {
        margin: 40px 0;
        text-align: center;
    }

    #reward .reward-link {
        font-size: 1.88rem;
    }

    #reward .btn-floating:hover {
        box-shadow: 0 6px 12px rgba(0, 0, 0, 0.2), 0 5px 15px rgba(0, 0, 0, 0.2);
    }

    #rewardModal {
        width: 320px;
        height: 350px;
    }

    #rewardModal .reward-title {
        margin: 15px auto;
        padding-bottom: 5px;
    }

    #rewardModal .modal-content {
        padding: 10px;
    }

    #rewardModal .close {
        position: absolute;
        right: 15px;
        top: 15px;
        color: rgba(0, 0, 0, 0.5);
        font-size: 1.3rem;
        line-height: 20px;
        cursor: pointer;
    }

    #rewardModal .reward-tabs {
        margin: 0 auto;
        width: 210px;
    }

    .reward-tabs .tabs {
        height: 38px;
        margin: 10px auto;
        padding-left: 0;
    }

    .reward-tabs .tabs .tab {
        height: 38px;
        line-height: 38px;
    }

    .reward-tabs .tab a {
        color: #fff;
        background-color: #ccc;
    }

    .reward-tabs .tab a:hover {
        color: #fff;
    }

    .reward-tabs .wechat-tab .active {
        color: #fff;
        background-color: #22AB38;
    }

    .reward-tabs .alipay-tab .active {
        color: #fff;
        background-color: #019FE8;
    }

    .reward-tabs .reward-img {
        width: 210px;
        height: 210px;
    }
</style>

<div id="reward">
    <a class="reward-link btn-floating btn-large waves-effect waves-light red">赏</a>

    <!-- Modal Structure -->
    <div id="rewardModal" class="modal">
        <div class="modal-content">
            <a class="close"><i class="fa fa-close"></i></a>
            <h4 class="reward-title">你的赏识是我前进的动力</h4>
            <div class="reward-content">
                <div class="reward-tabs">
                    <ul class="tabs">
                        <li class="tab wechat-tab waves-effect waves-light"><a class="active" href="#wechat">微信</a></li>
                        <li class="tab alipay-tab waves-effect waves-light"><a href="#alipay">支付宝</a></li>
                    </ul>
                    <div id="wechat">
                        <img src="/medias/reward/wechat.png" class="reward-img" alt="微信打赏二维码">
                    </div>
                    <div id="alipay">
                        <img src="/medias/reward/alipay.jpg" class="reward-img" alt="支付宝打赏二维码">
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    $(function () {
        $('#reward .reward-link').on('click', function () {
            $('#rewardModal').openModal();
        });

        $('#rewardModal .close').on('click', function () {
            $('#rewardModal').closeModal();
        });
    });
</script>
            

            <link rel="stylesheet" type="text/css" href="/libs/share/css/share.min.css">

<div id="article-share">
    
    <div class="social-share" data-disabled="qzone, qq, weibo, douban"></div>
    
</div>

<script src="/libs/share/js/social-share.min.js"></script>

            <div class="reprint">
                <p>
                    <span class="reprint-tip">
                        <i class="fa fa-exclamation-circle"></i>&nbsp;&nbsp;Reprint please specify:
                    </span>
                    <a href="http://viabcde.github.io" class="b-link-green">廖锡洪</a>
                    <i class="fa fa-angle-right fa-lg fa-fw text-color"></i>
                    <a href="/2018/12/19/2018-12-06-Oracle2/" class="b-link-green">Oracle2</a>
                </p>
            </div>
        </div>
    </div>

    

    

    

    

    

    

<article id="prenext-posts" class="prev-next articles">
    <div class="row article-row">
        
        <div class="article col s12 m6" data-aos="fade-up">
            <div class="article-badge left-badge text-color">
                <i class="fa fa-chevron-left"></i>&nbsp;Previous</div>
            <div class="card">
                <a href="/2018/12/19/2018-12-06-Oracle遇到的问题/">
                    <div class="card-image">
                        
                        <img src="http://pmi6mt23n.bkt.clouddn.com/9.jpg" class="responsive-img" alt="Oracle遇到的问题">
                        
                        <span class="card-title">Oracle遇到的问题</span>
                    </div>
                </a>
                <div class="card-content article-content">
                    <div class="summary">登录时遇到：ORA-28009：connection as SYS should be as SYSDBA OR SYSOPER解决方法：例如我的oracle 密码为 Oracle12c 输入口令应该填 Oracle12c as sysdb</div>
                    <div class="publish-info">
                        <span class="publish-date">
                            <i class="fa fa-clock-o fa-fw icon-date"></i>2018-12-19
                        </span>
                        <span class="publish-author">
                            
                            <i class="fa fa-bookmark fa-fw icon-category"></i>
                            
                            <a href="/categories/java/" class="post-category" target="_blank">
                                    java
                                </a>
                            
                            
                        </span>
                    </div>
                </div>
                
                <div class="card-action article-tags">
                    
                    <a href="/tags/数据库/" target="_blank">
                        <span class="chip bg-color">数据库</span>
                    </a>
                    
                </div>
                
            </div>
        </div>
        
        
        <div class="article col s12 m6" data-aos="fade-up">
            <div class="article-badge right-badge text-color">
                Next&nbsp;<i class="fa fa-chevron-right"></i>
            </div>
            <div class="card">
                <a href="/2018/12/17/2018-12-06-小程序入门程序的解释/">
                    <div class="card-image">
                        
                        <img src="http://pmi6mt23n.bkt.clouddn.com/6.jpg" class="responsive-img" alt="小程序入门程序的解释">
                        
                        <span class="card-title">小程序入门程序的解释</span>
                    </div>
                </a>
                <div class="card-content article-content">
                    <div class="summary">程序的组成app.js：小程序的逻辑     必须app.json  ：小程序的公共设置   必须app.wxss：小程序的公共样式表   非必须每个文件夹表示一个页面，一个页面由4个文件组成js：页面逻辑   必须wxml：页面结构   </div>
                    <div class="publish-info">
                            <span class="publish-date">
                                <i class="fa fa-clock-o fa-fw icon-date"></i>2018-12-17
                            </span>
                        <span class="publish-author">
                            
                            <i class="fa fa-bookmark fa-fw icon-category"></i>
                            
                            <a href="/categories/java/" class="post-category" target="_blank">
                                    java
                                </a>
                            
                            
                        </span>
                    </div>
                </div>
                
                <div class="card-action article-tags">
                    
                    <a href="/tags/小程序/" target="_blank">
                        <span class="chip bg-color">小程序</span>
                    </a>
                    
                </div>
                
            </div>
        </div>
        
    </div>
</article>
</div>


    

</main>


<footer class="page-footer bg-color">
    <div class="container row center-align">
        <div class="col s12 m8 l8 copy-right">
            本站由&copy;<a href="https://blinkfox.github.io/" target="_blank">Blinkfox</a>基于
            <a href="https://hexo.io/" target="_blank">Hexo</a> 的
            <a href="https://github.com/blinkfox/hexo-theme-matery" target="_blank">hexo-theme-matery</a>主题搭建.

            

            
			
                <br>
                
                <span id="busuanzi_container_site_pv">
                    <i class="fa fa-heart-o"></i>
                    本站总访问量 <span id="busuanzi_value_site_pv" class="white-color"></span>
                </span>
                
                
                <span id="busuanzi_container_site_uv">
                    <i class="fa fa-users"></i>
                    次,&nbsp;访客数 <span id="busuanzi_value_site_uv" class="white-color"></span> 人.
                </span>
                
            
        </div>
        <div class="col s12 m4 l4 social-link social-statis">
    <a href="https://github.com/viabcde/viabcde.github.io" class="tooltipped" target="_blank" data-tooltip="访问我的GitHub" data-position="top" data-delay="50">
        <i class="fa fa-github"></i>
    </a>



    <a href="mailto:437230257@qq.com" class="tooltipped" target="_blank" data-tooltip="邮件联系我" data-position="top" data-delay="50">
        <i class="fa fa-envelope-open"></i>
    </a>



    <a href="tencent://AddContact/?fromId=50&fromSubId=1&subcmd=all&uin=437230257" class="tooltipped" data-tooltip="QQ联系我: 437230257" data-position="top" data-delay="50">
        <i class="fa fa-qq"></i>
    </a>


</div>
    </div>
</footer>

<div class="progress-bar"></div>


<!-- 搜索遮罩框 -->
<div id="searchModal" class="modal">
    <div class="modal-content">
        <div class="search-header">
            <span class="title"><i class="fa fa-search"></i>&nbsp;&nbsp;Search</span>
            <input type="search" id="searchInput" name="s" placeholder="Please enter a search keyword" class="search-input" autofocus>
        </div>
        <div id="searchResult"></div>
    </div>
</div>

<script src="/js/search.js"></script>
<script type="text/javascript">
    searchFunc("/" + "search.xml", 'searchInput', 'searchResult');
</script>
<!-- 回到顶部按钮 -->
<div id="backTop" class="top-scroll">
    <a class="btn-floating btn-large waves-effect waves-light" href="#!">
        <i class="fa fa-angle-up"></i>
    </a>
</div>


<script src="/libs/materialize/js/materialize.min.js"></script>
<script src="/libs/masonry/masonry.pkgd.min.js"></script>
<script src="/libs/aos/aos.js"></script>
<script src="/libs/scrollprogress/scrollProgress.min.js"></script>
<script src="/libs/lightGallery/js/lightgallery-all.min.js"></script>
<script src="/js/matery.js"></script>

<!-- Global site tag (gtag.js) - Google Analytics -->



    <script src="/libs/others/clicklove.js"></script>


    <script async src="/libs/others/busuanzi.pure.mini.js"></script>


<script src="/live2dw/lib/L2Dwidget.min.js?0c58a1486de42ac6cc1c59c7d98ae887"></script><script>L2Dwidget.init({"pluginRootPath":"live2dw/","pluginJsPath":"lib/","pluginModelPath":"assets/","tagMode":false,"debug":false,"model":{"jsonPath":"/live2dw/assets/shizuku.model.json"},"display":{"position":"right","width":150,"height":300},"mobile":{"show":true},"search":null,"path":"search.xml","field":"post","log":false});</script></body>
</html>